<nav class="navbar navbar-expand-lg">
  <div class="container-fluid">
    <div class="navbar-text">NNHS Bus App</div>
    <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link button text-center" aria-current="page" href="/admin">Admin</a>
        </li>
        <li class="nav-item text-center">
          <a class="nav-link button" href="/help">Help</a>
        </li>
      </ul>
    </div>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>  


<!-- <div class="container-fluid"> -->

<ul class="nav bus-nav mt-2 align-items-center justify-content-center">
  <li class="nav-item me-1">
    <i class="fa-solid fa-bus-simple" id="pin-bus-holder">: #</i>
  </li>
  <li class="nav-item">
    Departure: None
  </li>
  <div class="nav-item dropdown-center">
    <button class="dropdown-toggle ms-2" type="button" data-bs-display="dynamic" data-bs-toggle="dropdown" data-bs-offset="0, 10" data-bs-auto-close="outside" aria-expanded="false">
    <i class="fa-solid fa-thumbtack"></i> 
    </button>
    <ul class="dropdown-menu">
      <% for(let i = 0; i < data.buses.length; i++) { %> 
          <li class = "bus-row p-1 text-center">
              <button class="pin-button" onclick="pinBus(this)"><%= data.buses[i].number %> <% if (data.buses[i].change) { %> &rarr; <%= data.buses[i].change %></span><% } %></button>
          </li>
      <% } %> 
    </ul>
  </div>
</ul>


<div class="announcement-nav nav bus-nav mt-2 text-center align-items-center justify-content-center">
    <i class="fa-solid fa-bullhorn"></i>
    <h3>- Announcements:</h3>
    <hr>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum euismod nunc felis, id semper nulla feugiat sed. Aenean malesuada sed neque vitae porttitor. Aliquam euismod sit amet arcu vel mollis. Quisque congue quam ac libero ullamcorper, nec semper erat fringilla. Vivamus maximus nisi non mauris mollis mollis. Morbi eleifend efficitur dignissim. Integer in nisi odio. Curabitur fermentum, diam ac blandit ullamcorper, quam sem efficitur dolor, in posuere dolor purus et purus. Nam vulputate arcu vitae eros fringilla, quis bibendum nisi venenatis. Maecenas interdum felis odio, ac consequat mi blandit a. Phasellus fringilla erat convallis velit accumsan, nec volutpat orci lacinia. In eu tincidunt eros.</p>
</div>
<!-- </div> -->

<!-- <div id = "panel-header" class = "panel-header" onclick = "togglePanelExpanded()">
    <h1 id = "pBusBanner">Pinned Bus: </h1>
</div>
<div id = "panel" class = "panel">
        <table id = "top-bus-table" class = "">
            <tbody id = "top-bus-table-body">
                <% for(let i = 0; i < data.buses.length; i++) { %> 
                    <tr class = "bus-row">
                        <td class="num-col" colspan="1"><%= data.buses[i].number %> <% if (data.buses[i].change) { %> &rarr; <%= data.buses[i].change %></span><% } %></td>
                        <td class="status-col" colspan="5"><%= data.buses[i].status ? data.buses[i].status : "Not Here" %><%= data.buses[i].time ? data.buses[i].time.toLocaleTimeString([], { timeZone: 'America/Chicago',  hour: '2-digit', minute: '2-digit', hour12: true }) : "" %></td>
                        <td class="pin-col" onclick="pinBus(this)">Pin</td>
                    </tr>
                <% } %> 
            </tbody>
        </table>
</div>    -->

<div class="buttons-container">
  <div id="notif-container">
    <a
      id="notif-button"
      onclick="enablePushNotifications('<%= data.vapidPublicKey %>')"
      >Enable Notifications</a
    >
  </div>
</div>

<!-- Main Content /\/\/\ ----------------------------------------------->

<input type="checkbox" id="credits-dropdown" />
<label class="credits-dropdown-label" for="credits-dropdown"
  >Show Credits</label
>
<div class="credits-dropdown">
  <p
    style="
      color: #006678;
      font-size: 100%;
      text-align: center;
      padding: 5px 15px 5px 15px;
      border-top: 3px solid;
    "
  >
    Credits: Pierre Hanlet, JD Piar, Varun Vaid, Maaz Zubair, Sayee Anand, Wyatt
    Barnes, Kurt Lovisa, Nolan Yee, Devam Das, Ronith Manikonda, Everett
    Dombrowski, Rohan Rao, Lucas van Laerhoven, Aidan Malana, Muhammad Yulbarsov
  </p>
</div>

<div id="IOSnotifpopup">
  <div>
    <i
      class="fa-regular fa-circle-xmark"
      onclick="document.getElementById('IOSnotifpopup').style.display='none'"
      style="position: absolute; right: 10px; top: 10px; cursor: pointer"
    ></i>
    <h2>It appears you may be using IOS</h2>
    <p>
      IOS needs you to add the busapp to the homescreen before enabling
      notifications. If you have already added the Bus App to your homescreen
      previously, remove it and re-add it. Once you have added the Bus App to
      your home screen, press the "Enable Notifications" button from within the
      app.
    </p>
    <video
      autoplay
      muted
      loop
      style="max-width: 100%; max-height: 100vh; width: 100%"
    >
      <source src="img/ios-instructions.mp4" type="video/mp4" />
    </video>
  </div>
</div>

<!-- Update the value of <% version = 1 %> when updating the what's new popup to make it appear again on launch -->
<input type="hidden" id="whatsNewVersion" value="<%=version%>" />
<div id="whatsNewPopup">
  <div>
    <i
      class="fa-regular fa-circle-xmark"
      onclick="hideWhatsNew(<%=version%>)"
      style="position: absolute; right: 10px; top: 10px; cursor: pointer"
    ></i>
    <h2>What's New</h2>
    <ul>
      <li>
        <p>Push notifications</p>
        <ul>
          <li>Push notifications are here! 🎉</li>
          <li>
            Press the &quot;Enable Notifications&quot; button to enable. ✅
          </li>
          <li>
            You will get <b>notified</b> when any of your
            <b>pinned buses</b> arrive and depart. 🔔
          </li>
          <li>
            To use on IPhones, the Bus App must be re-added to the home screen
            first. 📲
          </li>
          <li>
            on IPhones, the notification will be silent - this is a limitation
            of IOS and sadly we cannot change this. 🔇
          </li>
          <li>
            ⚠️ <b>do not rely on push notifications as your only indicator</b>,
            they may be delayed or even not arrive at all depending on network
            conditions. Keep an eye on the Bus App just in case. ⚠️
          </li>
        </ul>
      </li>
      <!--li><p>More responsive announcements</p>
            <ul>
                <li>The announcement now updates without reloading the page. 📡</li>
            </ul>
        </li-->
      <li>
        <p>Better system integration</p>
        <ul>
          <li>
            Adding the Bus App to your home screen now makes it behave like a
            proper app rather than a shortcut to the website. 💯
          </li>
          <li>Facilitates future features in the works. 🧰</li>
        </ul>
      </li>
      <li>
        <p>Backend Improvements</p>
        <ul>
          <li>
            Improvements to the admin page make it easier for staff to get you
            to your bus on time 🕞
          </li>
          <li>
            Improvements to the server make the Bus App more secure and fixes
            bugs for everybody 💪
          </li>
        </ul>
      </li>
      <li>More to come in the future! 🛠️</li>
    </ul>
    <br />
    <p>- 🚍 The Bus App Team</p>
    <br /><a class="generic-button" onclick="hideWhatsNew(<%=version%>)"
      >Got It!</a
    >
  </div>
</div>

<div id="networkBlocker">
    <i class="fa-solid fa-globe" style="font-size: min(30vw, 40vh); clip-path: polygon(0 0, 100% 0, 100% 100%, 20% 100%, 100% 0, 80% 0, 0 100%);"></i>
    <h3 style="font-size: min(5vw, 10vh); font-family: sans-serif; margin-top: 20px;">No Network</h3>
</div>
<div id="networkIndicator"></div>

<!-- <p id="contactInfo">
    If you have feedback, feature requests or bugs to report please contact busappnnhsse@gmail.com. 
    Please include the topic of the email in the subject.
</p> -->
