<div class="announcement-div d-flex justify-content-center container-fluid mt-1">
  <div class="row text-center align-items-center justify-content-center">
      <!-- <i class="fa-solid fa-bullhorn"></i> -->
      <h3>Announcements:</h3>
      <!-- <hr> -->
      <p id="announcement-text"><%= data.announcement %></p>
  </div>
</div>

<div class="content-container nav-item container-fluid text-center mt-1">
  <div class="row justify-content-center dropdown-center">
    <button class="dropdown-toggle" type="button" data-bs-display="dynamic" data-bs-toggle="dropdown" data-bs-offset="0, 5" data-bs-auto-close="outside" aria-expanded="false">
    <i class="fa-solid fa-thumbtack"></i> 
    </button>
    <ul class="dropdown-menu">
      <% for(let i = 0; i < data.buses.length; i++) { %> 
          <li class = "bus-row p-1 text-center">
              <button class="pin-button" onclick="pinBus(this)"><%= data.buses[i].number %> <% if (data.buses[i].change) { %> &rarr; <%= data.buses[i].change %></span><% } %></button>
          </li>
      <% } %> 
    </ul>
  </div>
  <div class="row justify-content-center">
    <table class="pinned-bus-table text-center">
      <thead>
          <th>Bus #</th>
          <th>Status</th>
      <tbody>
      </tbody>
    </table>
  </div>
</div>

<!-- Main Content /\/\/\ ----------------------------------------------->

<div id="credits">
  <i class="fa-regular fa-circle-xmark" onclick="toggleCredits()" style="position: absolute; z-index: 2; font-size: max(50%, 25px); right: 10px; top: 10px; cursor: pointer"></i>
  <div class="spacer"></div>
  <div class="starWarsContainer">
    <% for(var i = 0; i < 4; i++) { %>
      <p>Pierre Hanlet</p>
      <p>JD Piar</p>
      <p>Varun Vaid</p>
      <p>Maaz Zubair</p>
      <p>Sayee Anand</p>
      <p>Wyatt Barnes</p>
      <p>Kurt Lovisa</p>
      <p>Nolan Yee</p>
      <p>Devam Das</p>
      <p>Ronith Manikonda</p>
      <p>Everett Dombrowski</p>
      <p>Rohan Rao</p>
      <p>Lucas van Laerhoven</p>
      <p>Aidan Malana</p>
      <p>Muhammad Yulbarsov</p>
    <% } %>
  </div>
</div>

<div id="IOSnotifpopup">
  <div>
    <i
      class="fa-regular fa-circle-xmark"
      onclick="document.getElementById('IOSnotifpopup').style.display='none'"
      style="position: absolute; right: 10px; top: 10px; cursor: pointer"
    ></i>
    <h2>It appears you may be using IOS</h2>
    <p>
      IOS needs you to add the busapp to the homescreen before enabling
      notifications. If you have already added the Bus App to your homescreen
      previously, remove it and re-add it. Once you have added the Bus App to
      your home screen, press the "Enable Notifications" button from within the
      app.
    </p>
    <video
      autoplay
      muted
      loop
      style="max-width: 100%; max-height: 100vh; width: 100%"
    >
      <source src="img/ios-instructions.mp4" type="video/mp4" />
    </video>
  </div>
</div>

<!-- Update the value of <% version = 2 %> in this comment when updating the what's new popup to make it appear again on launch -->
<input type="hidden" id="whatsNewVersion" value="<%=version%>"/>
<div id="whatsNewPopup"><div> <i class="fa-regular fa-circle-xmark" onclick="hideWhatsNew(<%=version%>)" style="position: absolute; right: 10px; top: 10px; cursor: pointer"></i>
    <h2>What's New</h2>
    <ul>
        <li><p>New Designs! 🖌️</p>
            <ul>
                <li>The Bus App has a new icon and logo 🎨</li>
                <li>Improved 404 page 🩹</li>
                <li>Whats next: total user interface redesign 📐</li>
            </ul>
        </li>
        <li><p>Performance Improvements And Better Reliability 🕒</p>
            <ul>
                <li>Notifications should now send faster and more efficiently 🔔</li>
                <li>Pinning a bus with notifications enabled now shows a loading indicator 📌</li>
                <li>Network indicator on bottom left is 🟢 for fast network, 🟡 for slow network, and 🔴 for offline</li>
                <li>Multiple security issues were identified and fixed 🔒</li>
            </ul>
        </li>
        <li><p>Backend Improvements 🧑‍🔧</p>
            <ul>
                <li>New backend code ensures fewer conflicts when new changes are added 🦾</li>
                <li>Bug fixes in admin page make it faster and easier for staff to get you to your bus ⏱️</li>
            </ul>
        </li>
        <li><p>More responsive announcements 🗣️</p>
            <ul>
                <li>The announcement now updates without reloading the page 📡</li>
                <li>Fixed bug where announcement disappeared randomly 🫥</li>
            </ul>
        </li>
        <li>Have feedback or ideas? Send us an email at <a href="mailto:busappdevs@proton.me">busappdevs@proton.me</a></li>
    </ul>
    <br />
    <p>- 🚍 The Bus App Team</p>
    <br /><a class="generic-button" onclick="hideWhatsNew(<%=version%>)"
      >Got It!</a
    >
  </div>
</div>

<div id="networkBlocker">
    <i class="fa-solid fa-globe" style="font-size: min(30vw, 40vh); clip-path: polygon(0 0, 100% 0, 100% 100%, 20% 100%, 100% 0, 80% 0, 0 100%);"></i>
    <h3 style="font-size: min(5vw, 10vh); font-family: sans-serif; margin-top: 20px;">No Network</h3>
</div>
<div id="networkIndicator"></div>