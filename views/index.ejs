<html>
    <head>
        <title>Bus App</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <link rel="icon" type="image/x-icon" href="/img/busAppIcon.png">
        <link rel="stylesheet" href="/css/index.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    </head>
    <body>
        <div class="header" id="header-div">
            <div class="weather-container">    
                <div class="weather-temperature">
                    <p><%= data.weather.temperature %>Â°F</p>
                </div>
                <div class="weather-status">
                    <p><%= data.weather.status %> </p>
                </div>
                <div class="weather-img">
                    <img src=<%= data.weather.icon %>>
                </div>
            </div>
            <div class="login-container">
                <a class="login-button" href="/admin">Login as editor</a>
            </div>
        </div>
        
        <div class="tables-container">
            <script src="/socket.io/socket.io.js"></script>
            <script src='js/indexConnect.js'></script>
            <div id="buses">
                <!-- pins -->
                <div id="pinBus">
                    <p>pins</p>
                    <table class="bus-table" id="pin-bus-table">
                        <thead>
                            <tr>
                                <th class="num-col">Bus #</th>
                                <th class="change-col">Bus Change</th>
                                <th class="status-col">Status</th>
                                <th class="time-col">Time</th>
                                <th class="pin-col">Pin?</th>
                            </tr>
                        </thead>
                        <tbody id="all-bus-rows">
                        <% for(let i = 0; i < data.buses[i].length; i++) { %> 
                        <% if (pin.includes (parseInt(data.buses[i].number))) { %>
                            <tr>
                                <td class="num-col"><%= data.buses[i].number %></td>
                                <td class="change-col"><%= data.buses[i].change %></td>
                                <td class="status-col"><%= data.buses[i].status %></td>
                                <td class="time-col"><%= data.buses[i].time %></td>
                                <td class="pin-col"><button class="pin-button" onclick="pinBus(this)"><i class="fa-solid fa-thumbtack"></i> Pin <%= data.buses[i].number %></button></td>             
                            </tr>
                        <% }} %> 
                        </tbody>
                    </table>
                </div>
                <!-- all -->
                <div id="allBus">
                    <%- include('include/indexContent'); %>
                </div>
                <script src="js/ejs.js"></script>
            </div>
        </div>
    </body>
</html>